<!DOCTYPE html>

<html>	
<head>
	<title>Grid Music</title>
	<link rel="stylesheet" type="text/css" href="myStyles.css">
</head>
	
<body class="gradientbg">

<div align="center">
		<img class="med-image" src="gridmusictrans.png">
</div>

<div>
	<div class="text-left indentleft">
		<div class="center">
			<p>
				Check out the code at the project repo<br/>
				<a class="white-text" href="https://github.com/sdocy/GridMusic" target="_blank">https://github.com/sdocy/GridMusic</a><br/><br/>
			</p>
			
			<p>Send me feedback, questions, or ideas
			<address>
				<a href="mailto:sdocy@comcast.net">sdocy@comcast.net</a>
			</address>
			</p>
		</div>

		<div>
			<p>
			<br/>A unique approach to music players, using gridviews to provide customizable music playlists.  Normal playlists
			must be played in order, randomly, or by the rules of some unknown so-called genius algorithm.  This app gives
			listeners control over the flow of their playlists, while still retaining some randomness in the playback to
			keep playback from getting stale and predictable.<br/><br/>
			Listeners lay out the songs, artists or albums for their playlist in a grid pattern.  Once playback has commenced,
			the next song to play will be randomly chosen from adjacent playlist grids (vertically and horizontally adjacent
			grids only).  If an unplayed choice is not available adjacent to the last played song, a new grid to start from is
			randomly chosen.  By creating their own grid patterns, users can control which songs will follow other songs.<br/><br/>
			</p>
		</div>
		
		<div class="center">
			<img class="small-image" style="border:3px dotted white" hspace="20" src="Grid3.png">
			<img class="small-image" style="border:3px dotted white" hspace="20" src="Grid4.png">
			<p>When the current grid is done playing, an adjacent, unplayed grid is chosen to be played next.</p>
		</div>
		
		<div>
			<br/><br/>Current implemented features :<br/>
			<ul>
				<li>Pause and resume playback.</li>
				<li>Choose to play a single song per grid or all songs on the grid.</li>
				<li>Tap on a grid to choose it to be played next.</li>
				<li>Reset played grids so that they may be played again.</li>
				<li>Toggle individual grids between played / not-played.</li>
				<li>Settings may be changed while the grid choosing algorithm is running.</li>
			</ul>
		</div>
	</div>
	
	<div class="text-right center">
		<p><br/><br/></p>
		<video width="360" height="640" controls preload >
			<source src="grid_music_proto.mp4">
		</video>
		
		<div class="text-right center">		
			<a href="play_design.png" target="_blank"><img class="small-image" src="play_design.png"></a>
			<p>Flowchart v1.0 for play_music activity.</p>
		</div>
	</div>
</div>

<div>
	<div class="text-left indentleft">
		<p><br/><br/>Version 2.0 March 14, 2018<br/></p>
					
		<div class="blink_me">
			<strong>It plays music !!</strong><br/>
		</div>
		
		<ul>
			<li>Added a static set of songs matching my static Grid playlist to the app and figured out basic MediaPlayer
				controls, starting and pausing music playback</li>
			<li>Added  an OnCompletion listener for the MediaPlayer to start the next song when the current one finishes</li>
			<li>Hooked up the skip-fastforward button to skip to the next song by stopping the current playback and explicitly
				calling the MedioPlayer's OnCompletion() method</li>
			<li>Fixed a bug when switching from single-play to album-play.  The album would use an old value for albumPlayIndex,
				left-over from a previous album-play setting.  I had to implement a method to get the index of a song from a grid,
				add a class variable to store the current playing song, and update albumPlayIndex when the album-play setting is chosen.</li>
		</ul>
		
		<p><br/><br/>Version 2.1 March 15, 2018<br/></p>
		<ul>
			<li>Removed rewind / fastfoward buttons for now</li>
			<li>Added stop button and implemented stop playing functionality</li>
			<li>Implemented Audio Focus
				<ul>
					<li>app grabs focus when user presses PLAY</li>
					<li>focus is kept until
						<ul>
							<li>player presses PAUSE</li>
							<li>player presses STOP</li>
							<li>player enters DONE state after playing all grids</li>
						</ul>
					</li>
					<li>music playback pauses when the app losses focus (i.e. incoming phone call)</li>
					<li>music playback continues when the app regains focus</li>
				</ul>
			</li>
			<li>Highlight main menu button text when pressed</li>
			<li>Highlight settings options text when pressed.</li>
			<li>Got a code snippet working that discovers music files on the phone</li>
			<li>Added custom app icon</li>
		</ul>
	</div>
	
	<div class="text-right center">		
		<a href="timeline.png" target="_blank"><img class="med-image" src="timeline.png"></a>
		<p>Project implementation timeline.  Grid Music has come so far since<br/>
		   I started working on it as a class project less than a month ago.</p>
	</div>
</div>

<div>
	<div class="text-left indentleft">
		<p><br/><br/>Version 2.2 March 20, 2018<br/></p>
		<ul>
			<li>App now plays songs from the phone rather than needing music resources contained within the app.  The pathnames are still
				hard-coded until I get the activity for creating  playlists working.</li>
			<li>Introduced code to handle errors when trying to play a song from the phone.  The grid is colored red to highlight the error
				and a new song is chosen to play, according to the current grid play setting.</li>
		</ul>
		
		<div class="center">
			<p><br/><br/></p>
			<a href="v2-play-design.png" target="_blank"><img class="small-image" src="v2-play-design.png"></a>
			<p>Flowchart v2.0 for play_music activity.</p>
		</div>
	</div>
	
	<div class="text-right center">
		<p><br/><br/></p>
		<video width="360" height="640" controls preload >
			<source src="it_plays_music.mp4">
		</video>
	</div>
</div>

<div class="text-left indentleft">
	<p><br/><br/>Version 2.3 March 26, 2018<br/></p>
	<ul>
		<li>Tapping a green grid that has been selected to play next now de-selects it</li>
		<li>You can start playback by tapping on any non-empty grid</li>
		<li>I over-rode onBackPressed() to allow the PlayGrid activity to remain active when back is pressed</li>
	</ul>
</div>

<div>
	<div class="text-left indentleft">
		<p><br/><br/>Version 3.0 March 28, 2018</p>
		<p>Prototyped Create Grid activity</p>
		<ul>
			<li>Designed a very complex XML layout, which includes two ListViews and a GridView, for the Grid you are building,
			    the list of grids to add, and a list of songs on the selected grid</li>
			<li>Got a code gist working which retrieves meta-data for all music files on the device via MediaStore</li>
			<li>Got another code gist working which extracts album art present on the device</li>
			<li>Many of my songs were ripped from my CD collection and didn't have associated cover art, so I downloaded
			    "Album Art Grabber", a simple app which finds album art for your music files.  It did not do a perfect job,
				it got very confused with songs from "Greatest Hits" albums, giving them all the same cover art, but did find art
				for just about everything.</li>
			<li>I sort the song list by artist name, album name and track number and remove duplicates (created a custom Comparator for this)</li>
			<li>Controls are pretty intuitive
				<ul>
					<li>tap on a grid in the to-place list, then an empty Grid spot to place it</li>
					<li>long press a grid in the to-place list to delete it from the to-place list</li>
					<li>long press a grid on the Grid to move it back to its original position in the to-place list</li>
					<li>press any grid to see a list of songs on that grid</li>
				</ul>
			</li>
			<li>There are options to undelete the last grid you deleted or all grids you deleted, placing them back in the to-place list</li>
			<li>Provided options to combine all songs in the to-place list by the same artist or the same album into one grid</li>
			<li>To-place list includes a counter of how many grids there are to place</li>
			<li>Reworked the GridAdapter to handle images specified as either a bitmap path or a resource id</li>
		</ul>
		
		<p>Misc other changes</p>
		<ul>
			<li>Show a toast message when unable to play a song on the Grid</li>
			<li>Refactored XML id tags to make it easier to track them, there are getting to be a lot of them</li>
			<li>Add album name and track number to Song class</li>
			<li>Tweaked onBackPressed() over-ride</li>
			<li>Replaced ArrayList declarations with List declarations</li>
		</ul>
		
		<p>Create Grid TODO</p>
		<ul>
			<li>Create an AsyncTask or CursorLoader for loading music</li>
			<li>Add ProgressBar for loading music</li>
			<li>Add grid counter for the Grid</li>
			<li>We'll also need an interface for splitting a grid back into individual songs</li>
			<li>Serialize and save the Grid to disk</li>
			<li>It might be nice to add the ability to play music in the Create Grid activity, at least snippets, in case the user
				is unsure what a particular song they have is</li>
		</ul>
	</div>
	
	<div class="text-right center">
		<p><br/><br/></p>
		<video width="360" height="640" controls preload >
			<source src="create_grid.mp4">
		</video>
	</div>
</div>


<div>
	<div class="text-left indentleft">
		<p><br/><br/>Version 4.0 June 7, 2018</p>
		<p>Prototyped Cover Art Downloader activity</p>
		<ul>
			<li>Searches your device for music files and associated cover art, and allows you to search the internet for additional
				 cover art and download any art missing from your music library</li>
			<li>Uses MediaStore Content Provider to discover music files and associated cover art on your device</li>
			<li>Combines music from the same album to provide a list of unique albums present on the device</li>
			<li>Uses public JSON APIs to query and download album cover art</li>
			<li>Integrated google search as an alternative method for searching for missing cover art</li>
		</ul>
		
		<p>Android development techniques I explored with this project</p>
		<ul>
			<li>My first use of ViewHolders with ListViews......love it...will definitely integrate them into the rest of GridMusic</li>
			<li>Use of LoaderManagers to asynchronously perform network tasks</li>
			<li>Retrieval and parsing of JSON data from public web APIs</li>
			<li>Use of progressbars and empty list views to enhance ListView presentation</li>
			<li>The use of RelativeLayouts and selective view visibility to efficiently switch between view content</li>
			<li>Having multiple clickable view elements within a ListView element</li>
			<li>Use of custom class comparators and Collection.sort() to organize ListView data</li>
		</ul>
		
		<p>Cover Art Downloader TODO</p>
		<ul>
			<li>Make use of CursorLoader to asynchronously search device for music and art</li>
			<li>Provide option to save downloaded art to device</li>
		</ul>
	</div>
	
	<div class="text-right center">
		<p><br/><br/></p>
		<video width="360" height="640" controls preload >
			<source src="coverArtCollector.mp4">
		</video>
	</div>
</div>

<div>
	<div class="text-left indentleft">
		<p><br/><br/>Version 4.01 June 9, 2018</p>
		<ul>
			<li>Made all methods in GeneralTools static.</li>
			<li>Implemented basic ViewHolders for all ArrayAdapters</li>
			<li>Switched from ListViews to RecyclerViews for CoverArtAdapter and GridListAdapter</li>
		</ul>
	</div>
</div>

<div>
	<div class="text-left indentleft">
		<p><br/><br/>Version 4.02 June 10, 2018</p>
		<ul>
			<li>Switched from GridViews to RecyclerViews for GridAdapter</li>
			<li>Figured out how to use Context to call a method in the instantiating class</li>
			<li>Created my own interface for CreateGridActivity and PlayGridActivity to implement so that GridAdapter (used by
				both classes) could call the same method (as far as GridAdapter is concerned) when a Grid element is clicked
				regardless of which Activity had created it.  This is required because it seems you have to implement onClick()
				and onLongClick() inside the RecyclerView Adapter since it does not provide onItemClick() and onItemLongClick()</li>
			<li>Replaced setTag / getTag with getAdapterPosition() for RecyclerViews</li>
			<li>Replaced notifyDataSetChanged() with notifyItemRemoved() where applicable</li>
			<li>When adding items back to the gridList, instead of adding to the end and then re-sorting, I now use my GridComparator
				to find the correct insertion index to insert at.  Also changed from notifyDataSetChanged() to notifyItemInserted()
				when putting items back on the gridList.  This was done when moving a grid back to the gridList from theGrid and
				when 'Undeleting Last'.  'Undelete All' still adds to the end and re-sorts since many items may be getting put back on
				the gridList.</li>
			<li>Set up empty music view for CreateGridActivity</li>
			<li>Switched gridList image and text to be vertically laid out, instead of horizontally, to provide more space for the Grid</li>
		</ul>
	</div>
</div>

<div>
	<div class="text-left indentleft">
		<p><br/><br/>Version 4.03 July 6, 2018</p>
		<ul>
			<li>Replaced expandable settings view with a Navigation Drawer menu in Play Grid and Create Grid activities.</li>
			<li>Added a second Navigation Drawer menu with instructions in Play Grid and Create Grid activities.</li>
			<li>Added a better back arrow icon.</li>
		</ul>
	</div>
</div>

<div>
	<div class="text-left indentleft">
		<p><br/><br/>Version 4.04 July 8, 2018</p>
		<ul>
			<li>Added Cursor Loaders for asynchronously loading music and album art in Create Grid and Download Album Art activities</li>
			<li>Updated getMusicList() to access class music lists directly</li>
		</ul>
	</div>
</div>

<div>
	<div class="text-left indentleft">
		<p><br/><br/>Version 5.0 July 28, 2018</p>
		<ul>
			<li>Implemented save grid functionality in Create Grid activity and load grid functionality in Play Grid Activity</li>
			<ul>
				<li>Save data is converted to JSON and written as a string to a save file</li>
				<li>Play Grid reads in the save file and retrieves the specific JSON values</li>
				<li>Had to switch GridElement from using drawable resources to exclusively converting a filepath to a bitmap</li>
				<li>Removed hardcoded grid initialization in Play Grid and all the drawable resources associated with it</li>
			</ul>
		</ul>
		<p>Save grid TODO</p>
		<ul>
			<li>Investigate caching cover art bitmaps so we don't have to constantly read the cover art file</li>
			<li>Check available space on device before trying to save the file</li>
			<li>Investigate save file size for large Grids, to make sure it is acceptable</li>
			<li>Research other Android save file best practices</li>
			<li>Investigate current hack of removing storage part of music path name in order to get music file to play</li>
		</ul>
	</div>
</div>

<div>
	<div class="text-left indentleft">
		<p><br/><br/>Version 5.1 Aug 20, 2018</p>
		<ul>
			<li>Added menus for saving to and loading from multiple save files</li>
		</ul>
	</div>
</div>

<div>
	<div class="text-left indentleft">
		<p><br/><br/>Version 5.2 Aug 25, 2018</p>
		<ul>
			<li>Highlight save file name when it is pressed...useful when I add a delete save file button</li>
			<li>Sorted saved file list alphabetically</li>
			<li>Create Grid activity - use recyclerview for list of saved files to support scrolling</li>
			<li>Added option to delete save files to Save Menu</li>
		</ul>
	</div>
</div>

<div>
	<div class="text-left indentleft">
		<p><br/><br/>TODO<br/></p>
					
		<ul>
			<li>Play Grid Activity - save current loaded Grid and re-load same Grid next time app is started</li>
			<li>Interface for editing save files...maybe just load a save file in the Create Grid activity?  But how does this interact with the
			    left-hand music list?  Do we remove any songs in the loaded save file from the left-hand list?</li>
			<li>In single play mode, if a user selects a grid, we skip that grid if all songs from it have already been played, perhaps we
				should reset all songs to not played in this case and then choose a random one?</li>
			<li>Create Grid Activity - break apart grids with multiple songs</li>
			<li>Figure out how to replace existing or missing cover art with downloaded cover art</li>
			<li>New feature - play all songs on a grid, in random order</li>
			<li>Get rewind and fast-forward working</li>
			<li>Go through the guides I found for building Android Audio Players</li>
			<li>Go back and retry supporting different grid sizes</li>
			<li>Replace implementing onClickListener with just creating an onClickListener that includes a switch statement for use by
				multiple UI objects</li>
			<li>Enable backbutton even if no music was found</li>
		</ul>
	</div>
</div>

</body>
</html>


